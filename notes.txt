from django.contrib.auth.mixins import UserPassesTestMixin

class CourtDeleteView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        return self.request.user.is_superuser  # Sprawdza, czy użytkownik jest administratorem

    def post(self, request, pk):
        court = Court.objects.get(pk=pk)
        court.delete()
        return redirect('court_list')  # Przekierowanie do listy boisk po usunięciu


class MatchDeleteView(LoginRequiredMixin, UserPassesTestMixin, View):
    def test_func(self):
        return self.request.user.is_superuser  # Sprawdza, czy użytkownik jest administratorem

    def post(self, request, pk):
        match = Match.objects.get(pk=pk)
        match.delete()
        return redirect('match_list')  # Przekierowanie do listy meczów po usunięciu


{% if user.is_superuser %}
    <form method="post" action="{% url 'court_delete' court.pk %}">
        {% csrf_token %}
        <button type="submit">Delete Court</button>
    </form>
{% endif %}



{% if user.is_superuser %}
    <form method="post" action="{% url 'match_delete' match.pk %}">
        {% csrf_token %}
        <button type="submit">Delete Match</button>
    </form>
{% endif %}

